create database instagram;
use instagram;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(100) unique not null,
    create_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE photos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    image_url VARCHAR(255) NOT NULL,
    user_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (user_id)
        REFERENCES users (id)
);

CREATE TABLE comments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    comment_text VARCHAR(255) NOT NULL,
    user_id INTEGER NOT NULL,
    photo_id INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (user_id)
        REFERENCES users (id),
	foreign key(photo_id) references photos(id)
);

CREATE TABLE likes (
    user_id INTEGER NOT NULL ,
    photo_id INTEGER NOT NULL ,
    created_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (user_id)
        REFERENCES users (id),
	foreign key(photo_id) references photos(id),
	primary key (user_id,photo_id)
);

CREATE TABLE follors (
    followers_id INTEGER NOT NULL ,
    followees_id INTEGER NOT NULL ,
    created_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (followers_id)
        REFERENCES users (id),
	foreign key(followers_id) references users(id),
	primary key (followers_id,followees_id)
);

insert into users(username) values('ahleywu'),('Lyvia');
SELECT * FROM PHOTOS;
insert into photos(user_id,image_url) values(1,'/asdaedD'),(4,'/ecawed'),(3,'/qwdSA');
insert into COMMENTs(COMMENT_TEXT,user_id,photo_id) values('I <3 it',1,7),('!!!',3,9),('hahaha',4,8);
insert into likes(photo_id,user_id) values(7,1),(8,3),(9,4);

CREATE TABLE tags (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tag_name VARCHAR(255) UNIQUE,
    created_at TIMESTAMP DEFAULT NOW()
);
CREATE TABLE photo_tags (
    photo_id INT NOT NULL,
    tag_id INT NOT NULL,
    FOREIGN KEY (photo_id)
        REFERENCES photos (id),
    FOREIGN KEY (tag_id)
        REFERENCES tags (id)
);

show tables;
